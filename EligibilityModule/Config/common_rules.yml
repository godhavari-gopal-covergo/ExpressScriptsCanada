# Common Rules Applied to All Record Types
version: "1.0"
description: "Global transformation rules and field definitions"

# Global field rules applied by field name pattern
field_rules:
  # All fields named "Filler" should be filled with spaces
  - pattern: ".*[Ff]iller.*"
    type: "default_value"
    value: ""
    pad_char: " "
    
  # All fields ending with "Date" should be formatted as YYYYMMDD
  - pattern: ".*[Dd]ate$"
    type: "date_format"
    format: "yyyyMMdd"
    
  # Note: Amount fields have their own field-specific transforms
  # No common rule needed for Amount fields

# Global transformations that can be referenced by any field
global_transforms:
  trim_spaces: "value?.ToString()?.Trim() ?? \"\""
  uppercase: "value?.ToString()?.ToUpper() ?? \"\""
  lowercase: "value?.ToString()?.ToLower() ?? \"\""
  format_date_yyyymmdd: "value != null ? DateTime.Parse(value.ToString()).ToString(\"yyyyMMdd\") : \"\""
  format_boolean_yn: "value != null && (bool)value ? \"Y\" : \"N\""
  zero_if_null: "value ?? 0"

# Global lookups - loaded from separate files in Config/Lookups/
# Lookup files will be automatically discovered and loaded
lookup_files:
  - "Lookups/province_codes.yml"
  - "Lookups/yes_no_codes.yml"
  - "Lookups/language_codes.yml"
  - "Lookups/relationship_codes.yml"

# Validation rules
validation_rules:
  required_fields: true
  trim_whitespace: true
  enforce_length: true
  log_warnings: true

